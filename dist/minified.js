let pokemonRepository=(function(){let pokemonList=[];let apiURL="https://pokeapi.co/api/v2/pokemon/?limit=151";function getAll(){return pokemonList}
function add(pokemon){if(typeof pokemon==="object"&&pokemon!==null){pokemonList.push(pokemon)}else console.log("Wrong input! Please use the correct format.")}
function addListItem(pokemon){let element=document.querySelector(".pokemon-list");let listItem=document.createElement("li");let button=document.createElement("button");button.innerText=pokemon.name;button.classList.add("button");listItem.appendChild(button);$(listItem).addClass("list-group-item col-sm-4");element.appendChild(listItem);button.addEventListener("click",function(){pokemonRepository.loadDetails(pokemon).then(function(){pokemonRepository.showModal(pokemon);$("#exampleModal").modal("show")})})}
function loadList(){return fetch(apiURL).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url,};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){let url=item.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){item.imageUrlFront=details.sprites.front_default;item.imageUrlBack=details.sprites.back_default;item.id=details.id;item.height=details.height;item.weight=details.weight;item.types=details.types.map((type)=>type.type.name).join(", ");item.abilities=details.abilities.map((ability)=>ability.ability.name).join(", ")}).catch(function(e){console.error(e)})}
function showModal(pokemon){let modalBody=$(".modal-body");let modalTitle=$(".modal-title");let modalHeader=$(".modal-header");modalTitle.empty();modalBody.empty();let nameElement=$("<h1>"+pokemon.name+"</h1>");let imageElementFront=$('<img class="modal-img" style="width:50%">');imageElementFront.attr("src",pokemon.imageUrlFront);let imageElementBack=$('<img class="modal-img" style="width:50%">');imageElementBack.attr("src",pokemon.imageUrlBack);let idElement=$("<p class='pokemon-id'>"+"#"+pokemon.id+"</p>");let heightElement=$("<p>"+"Height: "+pokemon.height+"</p>");let weightElement=$("<p>"+"Weight: "+pokemon.weight+"</p>");let typesElement=$("<p class='pokemon-types'>"+"Type: "+pokemon.types+"</p>");let abilitiesElement=$("<p class='pokemon-abilities'>"+"Abilities: "+pokemon.abilities+"</p>");modalTitle.append(nameElement);modalBody.append(imageElementFront);modalBody.append(imageElementBack);modalBody.append(idElement);modalBody.append(heightElement);modalBody.append(weightElement);modalBody.append(typesElement);modalBody.append(abilitiesElement)}
return{getAll:getAll,add:add,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails,showModal:showModal,}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})});document.querySelector("#pokemon-search").addEventListener("input",function(e){let searchValue=e.target.value.toLowerCase();let pokemonListItems=document.querySelectorAll(".pokemon-list li");pokemonListItems.forEach((item)=>{let button=item.querySelector("button");let name=button.innerText.toLowerCase();if(name.includes(searchValue)){item.style.display=""}else{item.style.display="none"}})})